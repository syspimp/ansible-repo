---
- name: "create new variable to hold the csv header"
  set_fact:
    final_header: "{{ reporttemplate.stdout.split('/n')[0] }}, {{ configreports.stdout.split('/n')[0] }}"

- name: "create new list variable to hold the results"
  set_fact:
    final_result: []

- name: "merge the two using the hostname as key"
  set_fact:
   final_result: "{{ final_result | combine( [ report_row + ', ' + item ] ) }}"
  when: "item.split(',')[1] in report_row"
  loop: "{{ configreports.stdout.split('\n') }}"
